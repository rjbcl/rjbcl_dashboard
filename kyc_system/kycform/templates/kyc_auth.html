{% load static %}
<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>RJBCL Login</title>

<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">

<!-- External CSS -->
<link rel="stylesheet" href="{% static 'css/login.css' %}">
</head>

<body>

<div class="login-card">

    <!-- LEFT NAV -->
    <div class="left-tabs">
        <img src="{% static 'images/rjbclogo.png' %}" alt="RJBC Logo">

        <div id="tabPolicy" class="tab-btn active">
            <i class="bi bi-person-circle"></i> Policy Holder Login
        </div>

        <div id="tabAgent" class="tab-btn">
            <i class="bi bi-person-badge"></i> Agent Login
        </div>
    </div>

    <!-- RIGHT FORMS -->
    <div class="right-form">

        <div class="header-logo">
            <img src="{% static 'images/rjbclogo.png' %}">
        </div>

        {% if messages %}
            {% for msg in messages %}
            <div class="d-none js-msg" data-tags="{{ msg.tags }}" data-text="{{ msg|escapejs }}"></div>
            {% endfor %}
        {% endif %}

        <!-- POLICY LOGIN FORM -->
        <form id="policyForm" method="POST" action="{% url 'kyc:policy_login' %}" autocomplete="off">
            {% csrf_token %}

            <!-- Autofill blockers -->
            <input type="text" name="fakeusernameremembered" style="display:none">
            <input type="password" name="fakepasswordremembered" style="display:none">

            <div class="login-title text-center">Policy Holder Login</div>

            <input class="form-control mb-3" 
                   name="policy_no" 
                   placeholder="Policy Number" 
                   autocomplete="off"
                   required>

            <input class="form-control mb-4" 
                   name="password" 
                   type="password" 
                   placeholder="Password" 
                   autocomplete="new-password"
                   required>

            <button class="btn-green">Login</button>

            <div class="small-link mt-2">
                <a href="/forgot-password/?type=policy">Forgot Password?</a>
            </div>

            <div class="small-link">
                New User? <a href="{% url 'kyc:policy_register' %}">Register your Policy No.</a>
            </div>

            <div class="small-link mt-3">
                <a href="{% url 'kyc:admin_login' %}" style="font-weight:700;">Admin Login</a>
            </div>
        </form>

        <!-- AGENT LOGIN FORM -->
        <form id="agentForm" method="POST" action="{% url 'kyc:agent_login' %}" style="display:none;" autocomplete="off">
            {% csrf_token %}

            <!-- Autofill blockers -->
            <input type="text" name="fakeusernameremembered" style="display:none">
            <input type="password" name="fakepasswordremembered" style="display:none">

            <div class="login-title text-center">Agent Login</div>

            <input class="form-control mb-3" 
                   name="agent_code" 
                   placeholder="Agent Code" 
                   autocomplete="off"
                   required>

            <input class="form-control mb-4" 
                   name="password" 
                   type="password" 
                   placeholder="Password" 
                   autocomplete="new-password"
                   required>

            <button class="btn-green">Login</button>

            <div class="small-link mt-2">
                <a href="/forgot-password/?type=agent">Forgot Password?</a>
            </div>

            <div class="small-link">
                New Agent? <a href="{% url 'kyc:agent_register' %}">Register your Agent Code</a>
            </div>

            <div class="small-link mt-3">
                <a href="{% url 'kyc:admin_login' %}" style="font-weight:700;">Admin Login</a>
            </div>
        </form>

    </div>
</div>

<!-- POPUP -->
<div id="popup" class="popup-overlay">
    <div class="popup-box">
        <div id="popupIcon"></div>
        <div id="popupTitle" class="popup-title"></div>
        <div id="popupMsg" class="popup-msg"></div>
        <button id="popupOk" class="popup-ok btn-green">OK</button>
    </div>
</div>

<!-- Active tab passed to JS -->
<script>
    window.activeTab = "{{ active_tab }}";
</script>

<!-- External JS -->
<script src="{% static 'js/login.js' %}" defer></script>

</body>
</html>
