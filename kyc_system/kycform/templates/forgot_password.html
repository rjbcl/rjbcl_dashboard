{% load static %}
<!doctype html>
<html lang="en">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>Forgot Password | राष्ट्रिय जीवन बीमा कम्पनी लिमिटेड</title>

    <!-- Bootstrap -->
    <link href="{% static 'bootstrap/css/bootstrap.min.css' %}" rel="stylesheet">
    <link rel="icon" href="{% static 'images/favicon-logo.png' %}" type="image/png">

    <!-- Bootstrap Icons -->
    <link rel="stylesheet" href="{% static 'bootstrap/css/bootstrap-icons.min.css' %}">

    <!-- SweetAlert2 -->
    <link href="{% static 'js/sweetalert2.all.min.js' %}" rel="stylesheet">

    <!-- Custom CSS -->
    <link rel="stylesheet" href="{% static 'css/colors.css' %}">
    <link rel="stylesheet" href="{% static 'css/login.css' %}">
    <link rel="stylesheet" href="{% static 'css/nepali.datepicker.v5.0.6.min.css' %}">


    <style>
        /* Minor adjustments for forgot password page */
        .hero-content .hero-icon {
            font-size: 4rem;
            color: rgba(255, 255, 255, 0.9);
            margin-bottom: 1.5rem;
            animation: pulse 2s ease-in-out infinite;
        }

        @keyframes pulse {

            0%,
            100% {
                opacity: 1;
                transform: scale(1);
            }

            50% {
                opacity: 0.8;
                transform: scale(1.05);
            }
        }
    </style>
</head>

<body>
    <div class="hero-8">
        <div class="login-wrapper">
            <!-- Left Hero Section -->
            <div class="hero-section">
                <div class="hero-content w-75">
                    <div class="hero-icon">
                        <i class="bi bi-shield-lock"></i>
                    </div>
                    <h1 class="hero-title">Account Recovery</h1>
                    <p class="hero-description">
                        We understand that forgetting passwords happens. Don't worry – we're here to help you
                        regain access to your account securely. Simply verify your identity with your
                        account details and date of birth, and we'll guide you through the password reset process.
                    </p>
                    <p class="hero-description" style="margin-top: 1.5rem; font-size: 0.95rem; opacity: 0.9;">
                        <i class="bi bi-info-circle me-2"></i>
                        Your security is our priority. All verification steps are encrypted and protected.
                    </p>
                </div>
                <div class="hero-overlay"></div>
            </div>

            <!-- Right Forgot Password Section -->
            <div class="login-section col-sm-12">
                <div class="login-card">
                    <!-- Logo and Company Name -->
                    <div class="login-header">
                        <img src="{% static 'images/rjbclogo.png' %}" alt="RJBCL Logo" class="company-logo">
                    </div>

                    <!-- Tab Buttons -->
                    <div class="tab-buttons" style="display: none">
                        <button type="button" class="tab-btn {% if request.GET.type != 'agent' %}active{% endif %}"
                            data-tab="policy">
                            Policy Holder
                        </button>
                        <button type="button" class="tab-btn {% if request.GET.type == 'agent' %}active{% endif %}"
                            data-tab="agent">
                            Agent
                        </button>
                    </div>

                    <!-- Django Messages (hidden, will be shown via SweetAlert) -->
                    {% if messages %}
                    {% for msg in messages %}
                    <div class="d-none js-msg" data-tags="{{ msg.tags }}" data-text="{{ msg|escapejs }}"></div>
                    {% endfor %}
                    {% endif %}

                    <!-- POLICY HOLDER FORGOT PASSWORD FORM -->
                    <div class="form-container {% if request.GET.type != 'agent' %}active{% endif %}"
                        id="policyFormWrapper">
                        <form id="policyForm" method="POST" autocomplete="off">
                            {% csrf_token %}
                            <div class="row g-1 mb-1">
                                <h5 class="border-bottom pb-2 mb-3 fw-bold">
                                    Password Recovery - Policy Holder
                                </h5>
                            </div>
                            <input type="hidden" name="user_type" value="policy">

                            <!-- Autofill blockers -->
                            <input type="text" name="fakeusernameremembered" style="display:none" tabindex="-1">
                            <input type="password" name="fakepasswordremembered" style="display:none" tabindex="-1">

                            <div class="form-group">
                                <label class="form-label">Policy Number</label>
                                <input class="form-control" name="identifier" id="policy-number" placeholder="POL123"
                                    autocomplete="off" required>
                            </div>

                            <div class="row">
                                <div class="form-group col-6">
                                    <label class="form-label">DOB (BS)</label>
                                    <input class="form-control" name="user_dob_bs" type="text" id="user_dob_bs"
                                        placeholder="YYYY-MM-DD" autocomplete="off" readonly required>
                                </div>
                                <div class="form-group col-6">
                                    <label class="form-label">DOB (AD)</label>
                                    <input class="form-control" name="dob" type="date" id="user_dob_ad"
                                        autocomplete="off" required>
                                </div>
                            </div>

                            <div class="form-footer mb-2">
                                <div>
                                    <span class="error-message text-danger"><i class="bi"></i> </span>
                                </div>
                            </div>

                            <button type="submit" class="btn-signin">
                                Verify & Continue
                            </button>

                            <div class="divider">
                                <span>OR</span>
                            </div>

                            <div class="form-links text-center">
                                <a href="/auth/policy/?tab=policy" class="back-link">
                                    <i class="bi bi-arrow-left"></i> Back to Login
                                </a>
                            </div>
                        </form>
                    </div>

                    <!-- AGENT FORGOT PASSWORD FORM -->
                    <div class="form-container {% if request.GET.type == 'agent' %}active{% endif %}"
                        id="agentFormWrapper">
                        <form id="agentForm" method="POST" autocomplete="off">
                            {% csrf_token %}
                            <div class="row g-1 mb-1">
                                <h5 class="border-bottom pb-2 mb-3 fw-bold">
                                    Password Recovery - Agent
                                </h5>
                            </div>
                            <input type="hidden" name="user_type" value="agent">

                            <!-- Autofill blockers -->
                            <input type="text" name="fakeusernameremembered" style="display:none" tabindex="-1">
                            <input type="password" name="fakepasswordremembered" style="display:none" tabindex="-1">

                            <div class="form-group">
                                <label class="form-label">Agent Code</label>
                                <input class="form-control" name="identifier" id="agent-code" placeholder="AGT123"
                                    autocomplete="off" required>
                            </div>

                            <div class="form-group">
                                <label class="form-label">License Number</label>
                                <input class="form-control" name="agent_license_number" type="text" id="agent_license_number" placeholder="LIC-XXX" autocomplete="off"
                                    required>
                            </div>

                            <div class="form-footer mb-2">
                                <div>
                                    <span class="error-message text-danger"></span>
                                </div>
                            </div>

                            <button type="submit" class="btn-signin">
                                Verify & Continue
                            </button>

                            <div class="divider">
                                <span>OR</span>
                            </div>

                            <div class="form-links text-center">
                                <a href="/auth/agent/?tab=agent" class="back-link">
                                    <i class="bi bi-arrow-left"></i>
                                    Back to Login
                                </a>
                            </div>
                        </form>
                    </div>

                    <!-- Footer -->
                    <div class="login-footer">
                        <p>© 2025 RJBCL. All rights reserved.</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Set active tab based on URL parameter
        window.activeTab = "{{ request.GET.type|default:'policy' }}";
    </script>

    <!-- jQuery -->
    <script src="{% static 'js/jquery-3.6.0.min.js' %}"></script>

    <!-- Custom JS -->
    <script src="{% static 'js/login.js' %}"></script>
    <script src="{% static 'js/nepali.datepicker.v5.0.6.min.js' %}"></script>
    <script src="{% static 'js/date-conversion.js' %}"></script>

</body>

</html>