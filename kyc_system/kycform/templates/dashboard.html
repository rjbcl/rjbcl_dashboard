{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Dashboard | Rastriya Jeevan Bheema</title>

<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<style>
body {
    background-color: #f8f9fa;
}
.sidebar {
    height: 100vh;
    background: #023047;
    color: white;
    padding: 20px;
}
.sidebar h4 {
    color: #ffb703;
}
.menu-item {
    color: #fff;
    padding: 10px 5px;
    cursor: pointer;
}
.menu-item:hover {
    background: rgba(255,255,255,0.1);
    border-radius: 5px;
}
.card {
    border-radius: 12px;
}
</style>

</head>
<body>

<div class="container-fluid">
  <div class="row">

    <!-- SIDEBAR -->
    <div class="col-md-3 col-lg-2 sidebar">
      <h4 class="mb-4">RJBC Dashboard</h4>

      <div class="menu-item">Dashboard Overview</div>
      <div class="menu-item">My Policies</div>
      <div class="menu-item">Premium History</div>
      <div class="menu-item">Payment Options</div>
      <div class="menu-item">Profile</div>
      <div class="menu-item">Logout</div>
    </div>

    <!-- MAIN CONTENT -->
    <div class="col-md-9 col-lg-10 p-4">

      <h3 class="fw-bold mb-4">
        Welcome! Policy: {{ policy_no }}
      </h3>

      <div class="row g-4">

        <!-- Total Policies -->
        <div class="col-md-4">
          <div class="card p-3 shadow-sm">
            <h6>Total Policies</h6>
            <h3 class="fw-bold" id="totalPolicies">3</h3>
          </div>
        </div>

        <!-- Total Premium Paid -->
        <div class="col-md-4">
          <div class="card p-3 shadow-sm">
            <h6>Total Premium Paid</h6>
            <h3 class="fw-bold" id="totalPremium">Rs. 85,500</h3>
          </div>
        </div>

        <!-- Pending Premium -->
        <div class="col-md-4">
          <div class="card p-3 shadow-sm">
            <h6>Pending Premium</h6>
            <h3 class="fw-bold text-danger">Rs. 5,700</h3>
          </div>
        </div>
      </div>

      <hr class="my-4">

      <!-- PREMIUM GRAPH -->
<div class="card p-4 shadow-sm mb-4">
  <h5 class="mb-3 fw-bold">Premium Payment Graph</h5>
  <canvas id="premiumGraph" height="120"></canvas>
</div>


      <!-- PREMIUM HISTORY TABLE -->
      <div class="card p-4 shadow-sm">
        <h5 class="mb-3 fw-bold">Premium Payment History</h5>

        <table class="table table-bordered">
          <thead class="table-light">
            <tr>
              <th>SN</th>
              <th>Date (AD)</th>
              <th>Date (BS)</th>
              <th>Amount</th>
              <th>Mode</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td>1</td>
              <td>2024-01-10</td>
              <td>2080-09-25</td>
              <td>Rs. 28,500</td>
              <td>Online</td>
            </tr>
            <tr>
              <td>2</td>
              <td>2023-09-10</td>
              <td>2080-05-25</td>
              <td>Rs. 28,500</td>
              <td>Bank</td>
            </tr>
            <tr>
              <td>3</td>
              <td>2023-05-10</td>
              <td>2079-12-27</td>
              <td>Rs. 28,500</td>
              <td>Online</td>
            </tr>
          </tbody>
        </table>
      </div>

    </div>
  </div>
</div>

<script>
const graph = document.getElementById('premiumGraph').getContext('2d');

new Chart(graph, {
    type: 'line',   // LINE GRAPH
    data: {
        labels: ['2079', '2080', '2081'],
        datasets: [{
            label: 'Premium Paid (Rs.)',
            data: [28500, 57000, 85500],
            borderWidth: 3,
            tension: 0.4,        // smooth curve
            fill: false,
            pointRadius: 5,
            pointBackgroundColor: '#023047',
            borderColor: '#023047'   // Graph color
        }]
    },
    options: {
        responsive: true,
        scales: {
            y: {
                beginAtZero: true,
                grid: { color: '#e0e0e0' }
            },
            x: {
                grid: { color: '#f0f0f0' }
            }
        },
        plugins: {
            legend: { display: true }
        }
    }
});
</script>

</body>
</html>
