{% load static %}
<!doctype html>
<html lang="en">

<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>RJBC Admin Dashboard</title>

<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">

<style>
:root {
    --green:#00c06f;
    --blue:#0a1d56;
    --light:#f5f7fa;
}

body {
    background:#f3f7f9;
    font-family:'Segoe UI',sans-serif;
}

/* SIDEBAR */
.sidebar {
    width:250px;
    height:100vh;
    background:var(--blue);
    color:#fff;
    position:fixed;
    top:0;
    left:0;
    padding:20px 15px;
}

.sidebar h4 {
    text-align:center;
    margin-bottom:30px;
}

.sidebar .menu-item {
    padding:12px 14px;
    margin-bottom:8px;
    border-radius:8px;
    cursor:pointer;
    color:#dbe2ef;
    display:flex;
    align-items:center;
    gap:10px;
    transition:0.2s;
}

.sidebar .menu-item:hover,
.sidebar .active {
    background:#112d7a;
    color:#fff;
}

/* CONTENT */
.content {
    margin-left:250px;
    padding:30px;
}

.top-bar {
    display:flex;
    justify-content:space-between;
    align-items:center;
    margin-bottom:25px;
}

.top-bar h3 {
    font-weight:700;
    color:var(--blue);
}

/* CARDS */
.stat-card {
    padding:22px;
    border-radius:12px;
    background:#fff;
    box-shadow:0 2px 8px rgba(0,0,0,0.1);
}

.stat-card h4 {
    font-size:18px;
    color:#555;
}

.stat-card .value {
    font-size:28px;
    font-weight:700;
    color:var(--blue);
}

/* TABLE */
.table-container {
    margin-top:30px;
    padding:22px;
    background:#fff;
    border-radius:12px;
    box-shadow:0 2px 10px rgba(0,0,0,0.08);
}

.table thead {
    background:var(--blue);
    color:#fff;
}

.logout-btn {
    color:#fff;
    background:#cc0000;
    padding:8px 14px;
    border-radius:6px;
    text-decoration:none;
}

.logout-btn:hover {
    background:#a30000;
    color:#fff;
}
</style>
</head>

<body>

<!-- SIDEBAR -->
<div class="sidebar">
    <h4>
        <img src="{% static 'images/rjbclogo.png' %}" style="width:150px;">
    </h4>

    <div class="menu-item active">
        <i class="bi bi-speedometer2"></i> Dashboard
    </div>

    <div class="menu-item">
        <i class="bi bi-people"></i> Pending KYC
    </div>

    <div class="menu-item">
        <i class="bi bi-check-circle"></i> Verified KYC
    </div>

    <div class="menu-item">
        <i class="bi bi-x-circle"></i> Rejected KYC
    </div>

    <a href="{% url 'kyc:admin_logout' %}" class="menu-item" style="color:#ffdddd;">
        <i class="bi bi-box-arrow-right"></i> Logout
    </a>
</div>

<!-- CONTENT -->
<div class="content">

    <!-- TOP BAR -->
    <div class="top-bar">
        <h3>Welcome, {{ admin_user }}</h3>
        <a href="{% url 'kyc:admin_logout' %}" class="logout-btn">
            <i class="bi bi-box-arrow-right"></i> Logout
        </a>
    </div>

    <!-- STAT CARDS -->
    <div class="row g-4">

        <div class="col-md-4">
            <div class="stat-card">
                <h4>Total KYC Submitted</h4>
                <div class="value">{{ total_kyc }}</div>
            </div>
        </div>

        <div class="col-md-4">
            <div class="stat-card">
                <h4>Pending Verification</h4>
                <div class="value">{{ pending_kyc }}</div>
            </div>
        </div>

        <div class="col-md-4">
            <div class="stat-card">
                <h4>Approved</h4>
                <div class="value">{{ approved_kyc }}</div>
            </div>
        </div>

    </div>

    <!-- TABLE LIST -->
    <div class="table-container">
        <h4 class="mb-3">Recent KYC Submissions</h4>

        <table class="table table-bordered">
            <thead>
                <tr>
                    <th>Policy No</th>
                    <th>Name</th>
                    <th>Status</th>
                    <th>Submitted On</th>
                    <th>Action</th>
                </tr>
            </thead>
            <tbody>
            {% for row in recent_kyc %}
                <tr>
                    <td>{{ row.policy_no }}</td>
                    <td>{{ row.name }}</td>
                    <td>{{ row.status }}</td>
                    <td>{{ row.submitted }}</td>
                    <td>
                        <a href="/admin/kyc-review/?policy_no={{ row.policy_no }}" class="btn btn-sm btn-primary">
                            Review
                        </a>
                    </td>
                </tr>
            {% endfor %}
            </tbody>
        </table>

    </div>

</div>

</body>
</html>
